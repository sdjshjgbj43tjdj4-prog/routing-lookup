<select id="state"><option value="">-- Select State --</option></select>
<select id="city"><option value="">-- Select City --</option></select>

<script>
async function loadStates() {
  const res = await fetch('/api/routing?action=states');
  const states = await res.json();
  const stateSelect = document.getElementById('state');
  states.forEach(st => {
    const option = document.createElement('option');
    option.value = st;
    option.textContent = st;
    stateSelect.appendChild(option);
  });
}

document.getElementById('state').addEventListener('change', async function(){
  const state = this.value;
  const citySelect = document.getElementById('city');
  citySelect.innerHTML = '<option value="">-- Select City --</option>';
  if(state){
    const res = await fetch(`/api/routing?action=cities&state=${encodeURIComponent(state)}`);
    const cities = await res.json();
    cities.forEach(city => {
      const option = document.createElement('option');
      option.value = city;
      option.textContent = city;
      citySelect.appendChild(option);
    });
  }
});

loadStates(); // call to populate states on page load
</script>
